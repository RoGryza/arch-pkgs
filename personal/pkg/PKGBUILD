# Maintainer: Rodrigo Gryzinski <rogryza@gmail.com>
pkgname='rogryza'
pkgver='0.0.6'
pkgrel=1
pkgdesc='Personal config files'
arch=('x86_64')
url='https://github.com/RoGryza/arch-pkgs'
license=('MIT')

install='rogryza.install'

depends=(
  'adobe-source-code-pro-fonts'
  'alsa-utils'
  'autoconf'
  'automake'
  'base'
  'bat'
  'binutils'
  'bison'
  'curl'
  'dhcpcd'
  'docker'
  'efibootmgr'
  'fakeroot'
  'fasd'
  'fd'
  'file'
  'findutils'
  'firefox'
  'flex'
  'gawk'
  'gcc'
  'gettext'
  'git'
  'gnupg'
  'grep'
  'groff'
  'gzip'
  'htop'
  'libtool'
  'lsd'
  'm4'
  'make'
  'man-db'
  'man-pages'
  'mediainfo'
  'net-tools'
  'nvidia'
  'openssh'
  'otf-fira-code'
  'p7zip'
  'pacman'
  'pacman-contrib'
  'patch'
  'pkgconf'
  'pkgfile'
  'pv'
  'refind'
  'ripgrep'
  'sed'
  'slock'
  'sudo'
  'texinfo'
  'ttf-fira-code'
  'unzip'
  'wget'
  'which'
  'wpa_supplicant'
  'xdg-utils'
  'xorg-server'
  'xorg-xinit'
  'xorg-xkill'
  'xorg-xsetroot'
  'yay'
  'zsh'
)


source=('locale.conf' 'pacman.conf' 'sudoers' '20-wired.network' '25-wireless.network' 'vconsole.conf' 'rogryza.target' 'LICENSE')
md5sums=('e24819fd5acc025b5b307b77bb871f65'
         '971cc0a399cef41e8fe3a8f0b05b144f'
         '472d6d6894c2b4f125c19c911879a767'
         '045479bf5964dd897859b529e164dad1'
         '6d37506bf8b5e4e92907bd6c700ca2c0'
         'abe1b00036f07278b7761bca14f8e871'
         '626fab9f0cafe0c7d1f56a251eb4e492'
         '2c07bcecf64114317112a5002ff77cd9')


function check() {
  echo "Validating locale.conf" && bash -n locale.conf
  visudo --check --file=sudoers
  systemd-analyze verify rogryza.target
}

function package() {
  mkdir -p "$pkgdir/etc/sudoers.d" && chmod 0750 "$pkgdir/etc/sudoers.d"
  install -Dm 0644 locale.conf "$pkgdir/etc/locale.conf"
  install -Dm 0644 pacman.conf "$pkgdir/etc/pacman.conf.rogryza"
  install -Dm 0640 sudoers "$pkgdir/etc/sudoers.d/rogryza"
  install -Dm 0644 20-wired.network "$pkgdir/etc/systemd/network/20-wired.network"
  install -Dm 0644 25-wireless.network "$pkgdir/etc/systemd/network/25-wireless.network"
  install -Dm 0644 vconsole.conf "$pkgdir/etc/vconsole.conf"
  install -Dm 0644 rogryza.target "$pkgdir/usr/lib/systemd/system/rogryza.target"
  install -Dm 0644 LICENSE "$pkgdir/usr/share/licenses/rogryza/LICENSE"
}
